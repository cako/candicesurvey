(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{31:function(e,t,a){e.exports=a(65)},36:function(e,t,a){},37:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(17),l=a.n(o),c=(a(36),a(9)),i=a(10),s=a(12),u=a(11),d=(a(37),a(66)),h=a(67);var m=function(){return r.a.createElement(d.a,{fluid:!0,key:"1"},r.a.createElement(h.a,{fluid:!0,className:"text-center",style:{marginTop:-20,marginBottom:-20}},r.a.createElement("h1",null,r.a.createElement("span",{"aria-label":"hi",role:"img"},"\ud83d\udc4b"),"  ","Hello, Participant"),r.a.createElement("br",null),r.a.createElement("h4",null,"and thank you for doing this survey!")))},g=(a(30),a(68)),p=a(69);a(70),a(71),a(72),a(73);var f=function(e){return r.a.createElement(h.a,{key:"2",fluid:!0,className:"d-flex justify-content-center align-items-center"},r.a.createElement(g.a,{style:{maxWidth:"600px"}},r.a.createElement(p.a,{style:{maxWidth:"600px"}},r.a.createElement("p",null,"Microphone status: ",r.a.createElement("b",null,e.status),r.a.createElement("br",null),r.a.createElement("ol",null,r.a.createElement("li",null,"Ensure sure the mic on! If you have issues, try reloading the page, restaring your browser, using another browser or changing you settings:"," ",r.a.createElement("a",{href:"https://support.google.com/chrome/answer/2693767"},"Android"),","," ",r.a.createElement("a",{href:"https://support.apple.com/guide/mac-help/control-access-to-your-microphone-on-mac-mchla1b1e1fe"},"Safari"),","," ",r.a.createElement("a",{href:"https://support.mozilla.org/en-US/kb/how-manage-your-camera-and-microphone-permissions"},"Firefox"),","," ",r.a.createElement("a",{href:"https://support.microsoft.com/en-us/help/4468232/windows-10-camera-microphone-and-privacy"},"Internet Explorer and Edge"),"."),r.a.createElement("li",null,"After the audio is recorded, a ",r.a.createElement("b",null,"unique link")," will be generated."),r.a.createElement("li",null,"Please ",r.a.createElement("b",null,"share")," this link with me!"))))))},b=a(20),v=a.n(b),y=a(26),E=a(29),k=a(6),O=a(74),S=a(75),w=a(27),j=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).canvas=r.a.createRef(),n}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(){this.draw()}},{key:"draw",value:function(){var e=this.props.audioData,t=this.canvas.current,a=t.height,n=t.width,r=t.getContext("2d"),o=0,l=1*n/e.length;r.lineWidth=2,r.strokeStyle="#000000",r.clearRect(0,0,n,a),r.beginPath(),r.moveTo(0,a/2);var c,i=Object(w.a)(e);try{for(i.s();!(c=i.n()).done;){var s=c.value/255*a;r.lineTo(o,s),o+=l}}catch(u){i.e(u)}finally{i.f()}r.lineTo(o,a/2),r.stroke()}},{key:"render",value:function(){return r.a.createElement("canvas",{width:"1000",height:"100",ref:this.canvas})}}]),a}(n.Component),R=(n.Component,a(28)),x=a(55);function T(e){return r.a.createElement(O.a,{color:e.toggled?"danger":"primary",size:"lg",style:{minWidth:200},onClick:e.onClick},e.toggled?"Stop recording":"Record")}function D(e){var t=Object(R.resolve)("https://candicesurvey2020.herokuapp.com",e.url_id);return"success"===e.status?r.a.createElement(S.a,{key:"send-success",color:"success"},"Find your recording at",r.a.createElement("br",null),r.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},t)):"uploading"===e.status?r.a.createElement(S.a,{key:"send-uploading",color:"warning"},"Your recording at will soon be available at",r.a.createElement("br",null),r.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},t)):"failed"===e.status?r.a.createElement(S.a,{key:"send-fail",color:"danger"},"The upload has failed!"," ",r.a.createElement("span",{role:"img","aria-label":"sad"},"\ud83d\ude22")):void 0}var C=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(c.a)(this,a),n=t.call(this,e);var r=navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){var t=new MediaRecorder(e);return t.onstop=n.recorderOnStop,t.onstart=n.recorderOnStart,t.ondataavailable=n.recorderOnDataAvailable,console.log(t),t}));return n.state={isToggleOn:!1,url_id:"",chunks:[],blob:null,sendStatus:"",mediaRecorder:r},n.handleRecordButton=n.handleRecordButton.bind(Object(k.a)(n)),n.handleSend=n.handleSend.bind(Object(k.a)(n)),n.handleDelete=n.handleDelete.bind(Object(k.a)(n)),n.recorderOnStop=n.recorderOnStop.bind(Object(k.a)(n)),n.recorderOnStart=n.recorderOnStart.bind(Object(k.a)(n)),n.recorderOnDataAvailable=n.recorderOnDataAvailable.bind(Object(k.a)(n)),n}return Object(i.a)(a,[{key:"recorderOnStop",value:function(e){var t=new Blob(this.state.chunks,{type:"audio/ogg; codecs=opus"});this.setState({blob:t})}},{key:"recorderOnDataAvailable",value:function(e){var t=[];t.push.apply(t,Object(E.a)(this.state.chunks)),t.push(e.data),this.setState({chunks:t})}},{key:"recorderOnStart",value:function(e){this.setState((function(e){return{chunks:[],blob:null}}))}},{key:"handleRecordButton",value:function(){console.log(this.state.mediaRecorder),this.state.isToggleOn?this.state.mediaRecorder.then((function(e){"inactive"!==e.state?(e.stop(),console.log("mediaRecorder status: "+e.state)):console.info("mediaRecorder is already inactive")})):this.state.mediaRecorder.then((function(e){"recording"!==e.state?(e.start(),console.log("mediaRecorder status: "+e.state)):console.info("mediaRecorder is already recording")})),this.setState({isToggleOn:!this.state.isToggleOn,mediaRecorder:this.state.mediaRecorder,url_id:"",chunks:[],blob:null,sendStatus:""})}},{key:"handleSend",value:function(){var e=x.generate(),t="./recording/"+e;console.log("Uploading to "+t);var a=new Blob(this.state.chunks,{type:"audio/ogg; codecs=opus"});console.log("Data size: ",a.size),this.setState({url_id:t,sendStatus:"uploading"});var n=new window.FileReader;n.readAsDataURL(a);var r=this;n.onloadend=function(){var a=n.result;a=a.split(",")[1];var o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:e,audio:a})};fetch(t,o).then(function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.setState({sendStatus:"uploading"}),t.ok){e.next=4;break}return r.setState({sendStatus:"failed"}),e.abrupt("return",Promise.reject(t.status));case 4:r.setState({sendStatus:"success"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){r.setState({sendStatus:"failed"}),console.error("There was an error uploading the file!\n",e)}))},console.log(this.state.sendStatus)}},{key:"handleDelete",value:function(){this.setState({isToggleOn:!1,blob:null,url_id:""})}},{key:"render",value:function(){var e=r.a.createElement("div",{className:"text-center"},r.a.createElement(T,{toggled:this.state.isToggleOn,onClick:this.handleRecordButton}));if(!this.state.blob)return e;var t=r.a.createElement("div",{className:"text-center"},r.a.createElement(O.a,{key:"send-button",color:"warning",size:"lg",style:{minWidth:20,marginRight:10},onClick:this.handleSend},"Send")),a=r.a.createElement("div",{className:"text-center"},r.a.createElement(D,{status:this.state.sendStatus,url_id:this.state.url_id}));return r.a.createElement("div",{className:"text-center"},e,r.a.createElement("br",null),r.a.createElement("div",{className:"text-center"},r.a.createElement("audio",{style:{minWidth:320},controls:!0,src:URL.createObjectURL(this.state.blob)})),this.state.sendStatus?a:t)}}]),a}(r.a.Component);var B=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={mic:"Pending"},navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){return n.setState({mic:"On"}),e})).catch((function(){return n.setState({mic:"Off"})})),n}return Object(i.a)(a,[{key:"render",value:function(){return"On"===this.state.mic?r.a.createElement("div",null,r.a.createElement(m,{key:"1"}),r.a.createElement(f,{key:"2",status:this.state.mic}),r.a.createElement("br",{key:"3"}),r.a.createElement(C,{key:"4"})):r.a.createElement("div",null,r.a.createElement(m,{key:"1"}),r.a.createElement(f,{key:"2",status:this.state.mic}),r.a.createElement("br",{key:"3"}),r.a.createElement("div",{className:"text-center"},r.a.createElement(O.a,{key:"4",color:"primary",size:"lg",style:{minWidth:200},disabled:!0},"Record")))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(64);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.f981efec.chunk.js.map